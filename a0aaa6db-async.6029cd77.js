(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["a0aaa6db"],{a1fc0469:function(e,a,t){t.d(a,"__esModule",{value:!0}),t.e(a,{default:function(){return O;}});var s=t("777fffbe"),r=t("852bbaa9"),n=t("6ac60d67"),l=t("95735630"),o=s._(l),i=t("2f16c0fe"),c=r._(i),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},u=t("bb493494"),f=s._(u),g=c.forwardRef(function(e,a){return c.createElement(f.default,(0,o.default)((0,o.default)({},e),{},{ref:a,icon:d}));}),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},p=c.forwardRef(function(e,a){return c.createElement(f.default,(0,o.default)((0,o.default)({},e),{},{ref:a,icon:h}));}),m=t("c473cf07"),x=s._(m),v=t("7998a0c7"),b=t("f92e4d98"),j=t("1bb9b64b"),w=s._(j),y=t("842bb047"),k=s._(y),_=t("1685b806"),M=s._(_),T=t("87cb0072"),z=s._(T),I=t("05cbd9ef"),P=s._(I),S=t("ef1d6174"),C=s._(S),F=t("24bfdff2"),R=s._(F),V=t("d2e572b6"),E=["rules","name","phoneName","fieldProps","onTiming","captchaTextRender","captchaProps"],H=c.default.forwardRef(function(e,a){var t,s=C.default.useFormInstance(),r=(0,c.useState)(e.countDown||60),l=(0,z.default)(r,2),i=l[0],d=l[1],u=(0,c.useState)(!1),f=(0,z.default)(u,2),g=f[0],h=f[1],p=(0,c.useState)(),m=(0,z.default)(p,2),x=m[0],v=m[1];e.rules,e.name;var b=e.phoneName,j=e.fieldProps,y=e.onTiming,_=e.captchaTextRender,T=e.captchaProps,I=(0,M.default)(e,E),S=(t=(0,k.default)((0,w.default)().mark(function e(a){return(0,w.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,I.onGetCaptcha(a);case 4:v(!1),h(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),h(!1),v(!1),console.log(e.t0);case 13:case"end":return e.stop();}},e,null,[[0,8]]);})),function(e){return t.apply(this,arguments);});return(0,c.useImperativeHandle)(a,function(){return{startTiming:function(){return h(!0);},endTiming:function(){return h(!1);}};}),(0,c.useEffect)(function(){var a=0,t=e.countDown;return g&&(a=window.setInterval(function(){d(function(e){return e<=1?(h(!1),clearInterval(a),t||60):e-1;});},1e3)),function(){return clearInterval(a);};},[g]),(0,c.useEffect)(function(){y&&y(i);},[i,y]),(0,n.jsxs)("div",{style:(0,o.default)((0,o.default)({},null==j?void 0:j.style),{},{display:"flex",alignItems:"center"}),ref:a,children:[(0,n.jsx)(R.default,(0,o.default)((0,o.default)({},j),{},{style:(0,o.default)({flex:1,transition:"width .3s",marginRight:8},null==j?void 0:j.style)})),(0,n.jsx)(P.default,(0,o.default)((0,o.default)({style:{display:"block"},disabled:g,loading:x},T),{},{onClick:(0,k.default)((0,w.default)().mark(function e(){var a;return(0,w.default)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!b){e.next=9;break;}return e.next=4,s.validateFields([b].flat(1));case 4:return a=s.getFieldValue([b].flat(1)),e.next=7,S(a);case 7:e.next=11;break;case 9:return e.next=11,S("");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop();}},e,null,[[0,13]]);})),children:(void 0===_?function(e,a){return e?"".concat(a," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801";}:_)(g,i)}))]});}),N=(0,V.createField)(H),q=t("7f8b5f84"),A=s._(q),B=t("edb6e4c7"),D=s._(B),L=t("f64fab5e"),$=s._(L),G=t("f28f50f3"),U=t("b13ca5b8"),W=t("80970a6e"),Z=t("be39a3b1"),O=()=>{let{token:e}=$.default.useToken(),[a,t]=(0,c.useState)(!1),{initialState:s,setInitialState:r}=(0,G.useModel)("@@initialState"),l=(0,G.useIntl)();return(0,n.jsx)(b.ProConfigProvider,{hashed:!1,children:(0,n.jsxs)("section",{style:{backgroundImage:"https://gw.alipayobjects.com/zos/rmsportal/TVYTbAXWheQpRcWDaDMu.svg"},children:[(0,n.jsxs)(U.Header,{style:{display:"flex",justifyContent:"flex-end",backgroundColor:e.colorBgContainer},children:[" ",(0,n.jsx)(W.SelectLang,{},"SelectLang")]}),(0,n.jsxs)(v.LoginForm,{logo:"https://github.githubassets.com/favicons/favicon.png",title:"Github",subTitle:"\u5168\u7403\u6700\u5927\u7684\u4EE3\u7801\u6258\u7BA1\u5E73\u53F0",onFinish:async e=>{if(a){let{data:a,message:t}=await (0,Z.login)(e);if(localStorage.setItem("token",a.token),localStorage.setItem("refreshToken",a.refreshToken),D.default.success(t),s&&s.fetchUserInfo){let e=await s.fetchUserInfo();r({...s,currentUser:e});}return setTimeout(()=>G.history.push("/"),500),!0;}{let{data:a,message:s}=await (0,Z.verify)(e);D.default.success(s),t(a);}},children:[!a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.default,{name:"account",fieldProps:{size:"large",prefix:(0,n.jsx)(x.default,{className:"prefixIcon"})},placeholder:l.formatMessage({id:"user.login.username.placeholder"}),rules:[{required:!0}]}),(0,n.jsx)(A.default.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(g,{className:"prefixIcon"}),strengthText:l.formatMessage({id:"user.login.password.length"}),statusRender:a=>{let t=a&&a.length>12?"ok":a&&a.length>6?"pass":"poor";return"pass"===t?(0,n.jsx)("div",{style:{color:e.colorWarning},children:l.formatMessage({id:"user.login.strength.medium"})}):"ok"===t?(0,n.jsx)("div",{style:{color:e.colorSuccess},children:l.formatMessage({id:"user.login.strength.strong"})}):(0,n.jsx)("div",{style:{color:e.colorError},children:l.formatMessage({id:"user.login.strength.low"})});}},placeholder:l.formatMessage({id:"user.login.password.placeholder"}),rules:[{required:!0,validator:(e,a)=>a&&a.length<6||a.length>20?Promise.reject(Error(l.formatMessage({id:"user.login.password.length"}))):Promise.resolve()}]})]}),a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.default,{fieldProps:{size:"large",prefix:(0,n.jsx)(p,{className:"prefixIcon"})},name:"email",rules:[{required:!0},{pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:l.formatMessage({id:"user.login.email.invalid"})}]}),(0,n.jsx)(N,{phoneName:"email",fieldProps:{size:"large",prefix:(0,n.jsx)(g,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:l.formatMessage({id:"user.login.captcha.placeholder"}),captchaTextRender:(e,a)=>e?`${a} ${l.formatMessage({id:"user.login.captcha.msg"})}`:l.formatMessage({id:"user.login.captcha.get"}),name:"verificationCode",rules:[{required:!0},{pattern:/^\d{6}$/,message:l.formatMessage({id:"user.login.captcha.minLength"})}],onGetCaptcha:async e=>{let a=await (0,G.request)("/api/sys/send",{data:{email:e},method:"POST"});D.default.success(a.message);}})]}),(0,n.jsx)("div",{style:{marginBlockEnd:24},children:(0,n.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})})]}),(0,n.jsx)(W.Footer,{})]})});};}}]);
//# sourceMappingURL=a0aaa6db-async.6029cd77.js.map