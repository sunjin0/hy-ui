(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["65cd27ed"],{e7920480:function(e,a,s){s.d(a,"__esModule",{value:!0}),s.e(a,{default:function(){return ee;}});var t=s("777fffbe"),o=s("852bbaa9"),r=s("6ac60d67"),d=s("2f16c0fe"),n=o._(d),l=s("45b35e13"),i=s("fe1f6fec"),u=s("f28f50f3"),f=s("05cbd9ef"),m=t._(f),c=s("edb6e4c7"),p=t._(c),g=s("04d1c651"),y=t._(g),h=s("b4e2f04e"),b=t._(h),x=s("ef1d6174"),M=t._(x),_=s("95735630"),j=t._(_),v=s("1685b806"),q=t._(v),T=s("97ae934d"),k=s("199372f4"),P=t._(k),C=s("d2e572b6"),w=s("90aef50f"),I=t._(w),R=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],S=n.default.forwardRef(function(e,a){var s=e.fieldProps,t=e.options,o=e.radioType,d=e.layout,n=e.proFieldProps,l=e.valueEnum,i=(0,q.default)(e,R);return(0,r.jsx)(I.default,(0,j.default)((0,j.default)({valueType:"button"===o?"radioButton":"radio",ref:a,valueEnum:(0,T.runFunction)(l,void 0)},i),{},{fieldProps:(0,j.default)({options:t,layout:d},s),proFieldProps:n,filedConfig:{customLightMode:!0}}));}),F=n.default.forwardRef(function(e,a){var s=e.fieldProps,t=e.children;return(0,r.jsx)(P.default,(0,j.default)((0,j.default)({},s),{},{ref:a,children:t}));}),O=(0,C.createField)(F,{valuePropName:"checked",ignoreWidth:!0});O.Group=S,O.Button=P.default.Button,O.displayName="ProFormComponent";var E=s("75f5fc90"),N=t._(E),B=s("7f8b5f84"),G=t._(B),z=s("64265f49"),L=t._(z),A=s("46694adb"),W=t._(A);let D=async e=>(0,u.request)("/api/sys/resource/list",{method:"POST",data:e}),H=async e=>(0,u.request)("/api/sys/resource/info",{method:"GET",params:{id:e}}),J=async e=>(0,u.request)("/api/sys/resource/add",{method:"POST",data:e}),K=async e=>(0,u.request)("/api/sys/resource/update",{method:"POST",data:e}),Q=async e=>(0,u.request)("/api/sys/resource/delete",{method:"GET",params:{id:e.id}}),U=async()=>{let{data:e}=await (0,u.request)("/api/sys/resource/select",{});return e;},V=e=>{let{id:a,open:s,setOpen:t,onSuccess:o}=e,[d]=M.default.useForm(),l=(0,u.useIntl)(),[i,f]=(0,n.useState)(!1);return(0,r.jsxs)(b.default,{readonly:i,id:a,request:async e=>{let a=await H(e);return"Resource_Type_Route"!==a.data.type&&f(!0),a;},open:s,setOpen:e=>{e&&f(!1),t&&t(e);},onSuccess:async e=>(e.type="Resource_Type_Route",a?await K(e):await J(e),o(),!0),form:d,children:[(0,r.jsx)(G.default,{name:"id",hidden:!0}),(0,r.jsx)(N.default,{name:"parentId",label:l.formatMessage({id:"pages.sys.resource.menu.parent"}),showSearch:!0,required:!0,rules:[{required:!0}],request:async()=>U()}),(0,r.jsx)(G.default,{name:"name",label:l.formatMessage({id:"pages.common.name.en"}),rules:[{required:!0}]}),(0,r.jsx)(G.default,{name:"nameCn",label:l.formatMessage({id:"pages.common.name.zh"}),rules:[{required:!0}]}),(0,r.jsx)(O.Group,{tooltip:{title:l.formatMessage({id:"pages.sys.resource.leaf.tooltip"})},name:"leaf",label:l.formatMessage({id:"pages.sys.resource.leaf"}),rules:[{required:!0}],options:[{label:l.formatMessage({id:"pages.common.yes"}),value:!0},{label:l.formatMessage({id:"pages.common.no"}),value:!1}]}),(0,r.jsx)(W.default,{name:["leaf"],children:({leaf:e})=>(0,r.jsx)(G.default,{name:"path",label:l.formatMessage({id:"pages.sys.resource.menu.path"}),required:e,rules:[{required:e}]})}),(0,r.jsx)(G.default,{name:"icon",label:l.formatMessage({id:"pages.sys.resource.menu.icon"})}),(0,r.jsx)(G.default,{name:"sortNum",label:l.formatMessage({id:"pages.common.sort.number"}),rules:[{required:!0}]}),(0,r.jsx)(L.default,{name:"description",label:l.formatMessage({id:"pages.common.description"})})]});};var X=s("3034e9c2"),Y=s("3c0f5305"),Z=t._(Y),$=s("07d60f32");let ee=()=>{let[e,a]=(0,n.useState)(!1),[s,t]=(0,n.useState)(void 0),o=(0,n.useRef)(),d=(0,u.useIntl)(),f=(0,u.useAccess)()[u.history.location.pathname],c=[{title:d.formatMessage({id:"pages.common.name.en"}),dataIndex:"name",key:"name"},{title:d.formatMessage({id:"pages.common.name.zh"}),dataIndex:"nameCn",key:"nameCn"},{title:d.formatMessage({id:"pages.sys.resource.menu.path"}),dataIndex:"path",width:200,key:"path"},{title:d.formatMessage({id:"pages.common.type"}),dataIndex:"type",valueType:"select",request:async()=>(0,$.getOptionList)("Resource_Type"),key:"type"},{title:d.formatMessage({id:"pages.common.description"}),dataIndex:"description",key:"description"},{title:d.formatMessage({id:"pages.common.sort.number"}),dataIndex:"sortNum",key:"sortNum",hideInSearch:!0},{title:d.formatMessage({id:"pages.common.option"}),valueType:"option",key:"option",fixed:"right",render:(e,s,o,n)=>f&&[(0,r.jsx)(m.default,{type:"link",onClick:()=>{t(s.id),a(!0);},children:d.formatMessage({id:"pages.common.edit"})},"editable"),(0,r.jsx)(y.default,{title:d.formatMessage({id:"pages.confirm.delete"}),onConfirm:async()=>{let{code:e,message:a}=await Q(s);null==n||n.reload(),200===e?p.default.success(a):p.default.error(a);},children:(0,r.jsx)(m.default,{type:"link",children:d.formatMessage({id:"pages.common.delete"})},"delete")},"delete")]}];return(0,r.jsxs)(l.PageContainer,{children:[(0,r.jsx)(i.ProTable,{actionRef:o,request:async e=>D(e),toolBarRender:()=>f&&[(0,r.jsx)(m.default,{icon:(0,r.jsx)(Z.default,{}),type:"primary",onClick:()=>{t(void 0),a(!0);},children:(0,r.jsx)(X.FormattedMessage,{id:"pages.common.new"})},"button")],columns:c}),(0,r.jsx)(V,{id:s,open:e,setOpen:a,onSuccess:()=>{var e;t(void 0),null===(e=o.current)||void 0===e||e.reload();}})]});};}}]);
//# sourceMappingURL=65cd27ed-async.d539e4f1.js.map