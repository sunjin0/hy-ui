(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["c29c9c3c"],{"1127bebd":function(e,a,s){s.d(a,"__esModule",{value:!0}),s.e(a,{default:function(){return z;}});var t=s("777fffbe"),d=s("852bbaa9"),n=s("6ac60d67"),o=s("2f16c0fe"),r=d._(o),i=s("45b35e13"),l=s("fe1f6fec"),m=s("f28f50f3"),u=s("05cbd9ef"),c=t._(u),p=s("7a5b16a5"),f=t._(p),g=s("edb6e4c7"),y=t._(g),h=s("04d1c651"),x=t._(h),b=s("b4e2f04e"),q=t._(b),j=s("ef1d6174"),M=t._(j),v=s("75f5fc90"),_=t._(v),k=s("7f8b5f84"),T=t._(k);let I=async e=>(0,m.request)("/api/sys/admin/list",{method:"POST",data:e}),w=async e=>(0,m.request)("/api/sys/admin/info",{method:"GET",params:{id:e}}),S=async e=>(0,m.request)("/api/sys/admin/add",{method:"POST",data:e}),O=async e=>(0,m.request)("/api/sys/admin/update",{method:"POST",data:e}),P=async e=>(0,m.request)("/api/sys/admin/delete",{method:"GET",params:{id:e.id}}),C=async()=>{let{data:e}=await (0,m.request)("/api/sys/role/options",{method:"GET"});return e;};var R=s("07d60f32");let G=e=>{let{id:a,open:s,setOpen:t,onSuccess:d}=e,o=(0,m.useIntl)(),[r]=M.default.useForm();return(0,n.jsxs)(q.default,{open:s,setOpen:t,id:a,request:async e=>w(e),onSuccess:async e=>(e.avatar||(e.avatar="https://gw.alipayobjects.com/zos/antfincdn/XAosXuNZyF/BiazfanxmamNRoxxVxka.png"),a?await O(e):await S(e),d(),!0),form:r,children:[(0,n.jsx)(T.default,{name:"id",hidden:!0}),(0,n.jsx)(_.default,{name:"roleIds",label:o.formatMessage({id:"pages.sys.role.name"}),rules:[{required:!0}],request:async()=>C(),fieldProps:{mode:"multiple"}}),(0,n.jsx)(T.default,{name:"username",label:o.formatMessage({id:"pages.common.name"}),rules:[{required:!0}]}),(0,n.jsx)(_.default,{name:"sex",label:o.formatMessage({id:"pages.common.gender"}),rules:[{required:!0}],request:async()=>(0,R.getOptionList)("Gender_Type")}),(0,n.jsx)(_.default,{name:"type",label:o.formatMessage({id:"pages.common.type"}),rules:[{required:!0}],request:async()=>(0,R.getOptionList)("System_Role")}),(0,n.jsx)(T.default,{name:"email",label:o.formatMessage({id:"pages.common.email"}),rules:[{required:!0}]}),(0,n.jsx)(T.default,{name:"phone",label:o.formatMessage({id:"pages.common.phone"}),rules:[{required:!0}]}),(0,n.jsx)(T.default.Password,{required:!a,name:"password",label:o.formatMessage({id:"pages.common.password"}),rules:[{required:!a,min:6,max:10}]})]});};var L=s("3c0f5305"),E=t._(L),F=s("3034e9c2");let z=()=>{let e=(0,m.useIntl)(),[a,s]=(0,r.useState)(!1),[t,d]=(0,r.useState)(void 0),o=(0,r.useRef)(),u=(0,m.useAccess)()[m.history.location.pathname],p=[{title:e.formatMessage({id:"pages.sys.role.name"}),dataIndex:"roleIds",valueType:"select",request:async()=>C(),fieldProps:{mode:"multiple"},hideInSearch:!0,key:"roleIds"},{title:e.formatMessage({id:"pages.common.name"}),dataIndex:"username",key:"username"},{title:e.formatMessage({id:"pages.common.gender"}),dataIndex:"sex",valueType:"select",request:async()=>(0,R.getOptionList)("Gender_Type"),key:"sex"},{title:e.formatMessage({id:"pages.common.avatar"}),dataIndex:"avatar",render:e=>(0,n.jsx)(f.default,{src:e,width:40,height:40,alt:""}),key:"avatar",hideInSearch:!0},{title:e.formatMessage({id:"pages.common.type"}),dataIndex:"type",valueType:"select",request:async()=>(0,R.getOptionList)("System_Role"),key:"type"},{title:e.formatMessage({id:"pages.common.email"}),dataIndex:"email",key:"email"},{title:e.formatMessage({id:"pages.common.phone"}),dataIndex:"phone",key:"phone"},{title:e.formatMessage({id:"pages.common.option"}),dataIndex:"option",key:"option",valueType:"option",render:(a,t,o,r)=>u&&[(0,n.jsx)(c.default,{type:"link",onClick:()=>{d(t.id),s(!0);},children:e.formatMessage({id:"pages.common.edit"})},"editable"),(0,n.jsx)(x.default,{title:e.formatMessage({id:"pages.confirm.delete"}),onConfirm:async()=>{let{code:e,message:a}=await P(t);200===e?y.default.success(a):y.default.error(a),null==r||r.reload();},children:(0,n.jsx)(c.default,{type:"link",children:e.formatMessage({id:"pages.common.delete"})})},"delete")]}];return(0,n.jsxs)(i.PageContainer,{children:[(0,n.jsx)(l.ProTable,{actionRef:o,rowKey:"user",toolBarRender:()=>u&&[(0,n.jsx)(c.default,{icon:(0,n.jsx)(E.default,{}),type:"primary",onClick:()=>{d(void 0),s(!0);},children:(0,n.jsx)(F.FormattedMessage,{id:"pages.common.new"})},"button")],columns:p,request:async e=>I(e)}),(0,n.jsx)(G,{id:t,open:a,setOpen:s,onSuccess:()=>{var e;d(void 0),null===(e=o.current)||void 0===e||e.reload();}})]});};}}]);
//# sourceMappingURL=c29c9c3c-async.6ba2a761.js.map