{"version":3,"sources":["src/services/sys/DictController.ts","src/components/Model/index.tsx","src/components/DrawerForm/index.tsx"],"sourcesContent":["import {request} from \"@umijs/max\";\r\nimport {Option, ResponseStructure} from \"@/services/entity/Common\";\r\nimport {Dict, DictSearchParams} from \"@/services/entity/Sys\";\r\n\r\n/**\r\n * @description 获取字典列表\r\n * @since 2025-07-17\r\n */\r\nexport const getDictList = async (params: DictSearchParams): Promise<ResponseStructure<Dict[]>> => {\r\n  return request('/api/sys/dict/list', {\r\n    method: 'POST',\r\n    data: params,\r\n  });\r\n}\r\n/**\r\n * @description 获取字典信息\r\n * @since 2025-07-17\r\n */\r\nexport const getDictInfo = async (params: DictSearchParams): Promise<ResponseStructure<Dict>> => {\r\n  return request('/api/sys/dict/info', {\r\n    method: 'GET',\r\n    params:{id:params},\r\n  });\r\n}\r\n/**\r\n * @description 添加字典\r\n * @since 2025-07-17\r\n */\r\nexport const addDictInfo = async (params: Dict): Promise<ResponseStructure<Dict>> => {\r\n  return request('/api/sys/dict/add', {\r\n    method: 'POST',\r\n    data: params,\r\n  });\r\n}\r\n/**\r\n * @description 修改字典\r\n * @since 2025-07-17\r\n */\r\nexport const updateDictInfo = async (params: Dict): Promise<ResponseStructure<Dict>> => {\r\n  return request('/api/sys/dict/update', {\r\n    method: 'POST',\r\n    data: params,\r\n  });\r\n}\r\n/**\r\n * @description 删除字典\r\n * @since 2025-07-17\r\n */\r\nexport const deleteDictInfo = async (params: DictSearchParams): Promise<ResponseStructure<Dict>> => {\r\n  return request('/api/sys/dict/delete', {\r\n    method: 'GET',\r\n    params:{id: params.id},\r\n  });\r\n}\r\n/**\r\n * @description 获取字典下拉列表\r\n * @since 2025-07-21\r\n */\r\nexport const getSelectList = async (): Promise<Option[]> => {\r\n  const {data} = await request('/api/sys/dict/select', {\r\n    method: 'GET',\r\n  });\r\n  return data;\r\n}\r\n/**\r\n * @description 字典\r\n * @since 2025-07-17\r\n */\r\nexport const getOptionList = async (parentCode: string): Promise<Option[]> => {\r\n  let {data} = await request(`/api/sys/dict/options`, {\r\n    method: 'GET',\r\n    params: {\r\n      parentCode\r\n    }\r\n  });\r\n  return data\r\n}\r\n","import {Button, Modal, ModalProps} from \"antd\";\r\nimport React, {useState} from \"react\";\r\n\r\ninterface Props extends ModalProps {\r\n  buttonText: string,\r\n  text: string\r\n}\r\n\r\nconst Model = (props: Props) => {\r\n  const {width, title, buttonText, text} = props\r\n  const [open, setOpen] = useState(false)\r\n  return <div>\r\n    <Button type={\"link\"} onClick={() => setOpen(true)}>{buttonText}</Button>\r\n    <Modal\r\n      title={title}\r\n      open={open}\r\n      onOk={() => {\r\n      }}\r\n      onCancel={() => {\r\n        setOpen(false)\r\n      }}\r\n      width={width}\r\n      footer={null}\r\n    >\r\n      <div\r\n        dangerouslySetInnerHTML={{__html: text}}\r\n      />\r\n    </Modal>\r\n  </div>\r\n}\r\nexport default Model\r\n","import {\r\n  DrawerForm,\r\n} from '@ant-design/pro-components';\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {Props} from \"@/components\";\r\nimport {Button} from \"antd\";\r\nimport {useIntl} from \"@umijs/max\";\r\n\r\n\r\nexport default (props: Props) => {\r\n  const {id, onSuccess, open, setOpen, children, form, request,readonly} = props;\r\n  const [loading, setLoading] = useState(false);\r\n  const intl = useIntl()\r\n  return (\r\n    <DrawerForm\r\n      params={id ? id : undefined}\r\n      request={async (params: any) => {\r\n        if (!params)\r\n          return {\r\n            data: {},\r\n            success: true,\r\n            code: 200\r\n          };\r\n        const res = await request(params);\r\n        form.setFieldsValue(res.data)\r\n        return res\r\n      }}\r\n      loading={loading}\r\n      open={open}\r\n      readonly={readonly}\r\n      onOpenChange={(open)=>{\r\n        if (setOpen) {\r\n          setOpen(open)\r\n        }\r\n      }}\r\n      form={form}\r\n      autoFocusFirstInput\r\n      drawerProps={{\r\n        destroyOnClose: true,\r\n      }}\r\n      submitter={{\r\n        render: (props, dom) => {\r\n          if (!readonly) {\r\n            return dom\r\n          }\r\n          return [\r\n            //关闭\r\n            <Button\r\n              key=\"cancel\"\r\n                    onClick={() => {\r\n              if (setOpen) {\r\n                setOpen(false)\r\n              }\r\n            }}>\r\n              {intl.formatMessage({id: 'pages.common.close'})}\r\n            </Button>\r\n          ]\r\n        }\r\n\r\n      }}\r\n      onFinish={async (values) => {\r\n        try {\r\n          setLoading(true)\r\n          return onSuccess(values)\r\n        } finally {\r\n          setLoading(false)\r\n        }\r\n      }}\r\n    >\r\n      {children}\r\n    </DrawerForm>\r\n  );\r\n};\r\n"],"names":[],"mappings":"gQA4Ba,WAAW,mBAAX,IAoBA,cAAc,mBAAd,IA9BA,WAAW,mBAAX,IAVA,WAAW,mBAAX,IA4DA,aAAa,mBAAb,IAVA,aAAa,mBAAb,IApBA,cAAc,mBAAd,cAtCS,YAQf,IAAM,EAAc,MAAO,GACzB,GAAA,SAAO,EAAC,qBAAsB,CACnC,OAAQ,OACR,KAAM,CACR,GAMW,EAAc,MAAO,GACzB,GAAA,SAAO,EAAC,qBAAsB,CACnC,OAAQ,MACR,OAAO,CAAC,GAAG,CAAM,CACnB,GAMW,EAAc,MAAO,GACzB,GAAA,SAAO,EAAC,oBAAqB,CAClC,OAAQ,OACR,KAAM,CACR,GAMW,EAAiB,MAAO,GAC5B,GAAA,SAAO,EAAC,uBAAwB,CACrC,OAAQ,OACR,KAAM,CACR,GAMW,EAAiB,MAAO,GAC5B,GAAA,SAAO,EAAC,uBAAwB,CACrC,OAAQ,MACR,OAAO,CAAC,GAAI,EAAO,EAAE,CACvB,GAMW,EAAgB,UAC3B,GAAM,CAAC,KAAA,CAAI,CAAC,CAAG,MAAM,GAAA,SAAO,EAAC,uBAAwB,CACnD,OAAQ,KACV,GACA,OAAO,EACT,EAKa,EAAgB,MAAO,IAClC,GAAI,CAAC,KAAA,CAAI,CAAC,CAAG,MAAM,GAAA,SAAO,EAAC,wBAAyB,CAClD,OAAQ,MACR,OAAQ,CACN,WAAA,CACF,CACF,GACA,OAAO,EACT,iFC9CA,+CAAA,wFA7B8B,YA6B9B,EAtBc,AAAC,IACb,GAAM,CAAC,MAAA,CAAK,CAAE,MAAA,CAAK,CAAE,WAAA,CAAU,CAAE,KAAA,CAAI,CAAC,CAAG,EACnC,CAAC,EAAM,EAAQ,CAAG,GAAA,UAAQ,EAAC,CAAA,GACjC,MAAO,WAAC,iBACN,UAAC,SAAM,EAAC,KAAM,OAAQ,QAAS,IAAM,EAAQ,CAAA,YAAQ,IACrD,UAAC,SAAK,EACJ,MAAO,EACP,KAAM,EACN,KAAM,KACN,EACA,SAAU,KACR,EAAQ,CAAA,GACV,EACA,MAAO,EACP,OAAQ,cAER,UAAC,OACC,wBAAyB,CAAC,OAAQ,CAAI,SAI9C,+ECpBA,+CAAA,8DANyC,qCAGnB,YAGtB,EAAe,AAAC,IACd,GAAM,CAAC,GAAA,CAAE,CAAE,UAAA,CAAS,CAAE,KAAA,CAAI,CAAE,QAAA,CAAO,CAAE,SAAA,CAAQ,CAAE,KAAA,CAAI,CAAE,QAAA,CAAO,CAAC,SAAA,CAAQ,CAAC,CAAG,EACnE,CAAC,EAAS,EAAW,CAAG,GAAA,UAAQ,EAAC,CAAA,GACjC,EAAO,GAAA,SAAO,IACpB,MACE,UAAC,YAAU,EACT,OAAQ,GAAU,KAAA,EAClB,QAAS,MAAO,IACd,GAAI,CAAC,EACH,MAAO,CACL,KAAM,CAAC,EACP,QAAS,CAAA,EACT,KAAM,GACR,EACF,IAAM,EAAM,MAAM,EAAQ,GAE1B,OADA,EAAK,cAAc,CAAC,EAAI,IAAI,EACrB,EACT,EACA,QAAS,EACT,KAAM,EACN,SAAU,EACV,aAAc,AAAC,IACT,GACF,EAAQ,GAEZ,EACA,KAAM,EACN,mBAAmB,IACnB,YAAa,CACX,eAAgB,CAAA,CAClB,EACA,UAAW,CACT,OAAQ,CAAC,EAAO,IACd,AAAK,EAGE,CAEL,UAAC,SAAM,EAEC,QAAS,KACX,GACF,EAAQ,CAAA,GAEZ,WACG,EAAK,aAAa,CAAC,CAAC,GAAI,oBAAoB,IANzC,UAQP,CAbQ,CAgBb,EACA,SAAU,MAAO,IACf,GAAI,CAEF,OADA,EAAW,CAAA,GACJ,EAAU,GACnB,QAAU,CACR,EAAW,CAAA,GACb,CACF,WAEC,IAGP"}